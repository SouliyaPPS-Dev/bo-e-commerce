{"version":3,"file":"rest-DHvUyYRS.js","sources":["../../src/dataProvider/rest.ts"],"sourcesContent":["import simpleRestProvider from 'ra-data-simple-rest';\nimport { fetchUtils } from 'react-admin';\nimport authProvider from '../authProvider';\n\nconst httpClient = async (url: string, options: fetchUtils.Options = {}) => {\n  try {\n    const response = await fetchUtils.fetchJson(url, options);\n    return response;\n  } catch (error: any) {\n    if (error.status === 401) {\n      try {\n        await authProvider.checkError({ status: 401 });\n        // If token refresh is successful, retry the original request\n        const response = await fetchUtils.fetchJson(url, options);\n        return response;\n      } catch (refreshError) {\n        // If token refresh fails, re-throw the error to trigger logout\n        throw error;\n      }\n    }\n    throw error;\n  }\n};\n\nexport default simpleRestProvider(process.env.REACT_APP_API_BASE_URL || 'http://localhost:4000', httpClient);\n"],"names":["httpClient","__name","url","options","fetchUtils.fetchJson","error","authProvider","rest","simpleRestProvider","define_process_env_default"],"mappings":"8IAIA,MAAMA,EAAaC,EAAA,MAAOC,EAAaC,EAA8B,KAAO,CAC1E,GAAI,CAEF,OADiB,MAAMC,EAAqBF,EAAKC,CAAO,CAE1D,OAASE,EAAY,CACnB,GAAIA,EAAM,SAAW,IACnB,GAAI,CACF,aAAMC,EAAa,WAAW,CAAE,OAAQ,IAAK,EAE5B,MAAMF,EAAqBF,EAAKC,CAAO,CAE1D,MAAuB,CAErB,MAAME,CACR,CAEF,MAAMA,CACR,CACF,EAlBmB,cAoBnBE,EAAeC,EAAmBC,EAAY,wBAA0B,wBAAyBT,CAAU"}